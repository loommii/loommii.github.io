<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Golang练习 | loommii</title>
<meta name="keywords" content="">
<meta name="description" content="
Go 中文网、思否、博客园等平台，内容主要以问答形式记录。如果回答中有错误，欢迎大家指出，共同学习、共同进步。">
<meta name="author" content="">
<link rel="canonical" href="https://loommii.github.io/go_practise/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css" integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://loommii.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://loommii.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://loommii.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://loommii.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://loommii.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://loommii.github.io/go_practise/index.xml">
<link rel="alternate" hreflang="zh" href="https://loommii.github.io/go_practise/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://loommii.github.io/go_practise/">
  <meta property="og:site_name" content="loommii">
  <meta property="og:title" content="Golang练习">
  <meta property="og:description" content=" Go 中文网、思否、博客园等平台，内容主要以问答形式记录。如果回答中有错误，欢迎大家指出，共同学习、共同进步。">
  <meta property="og:locale" content="zh">
  <meta property="og:type" content="website">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Golang练习">
<meta name="twitter:description" content="">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://loommii.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Golang练习",
      "item": "https://loommii.github.io/go_practise/"
    }
  ]
}
</script>


</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://loommii.github.io/" accesskey="h" title="loommii (Alt + H)">loommii</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://loommii.github.io/skill/" title="文章">
                    <span>文章</span>
                </a>
            </li>
            <li>
                <a href="https://loommii.github.io/go_practise/" title="Golang练习">
                    <span class="active">Golang练习</span>
                </a>
            </li>
            <li>
                <a href="https://loommii.github.io/leetcode/" title="力扣">
                    <span>力扣</span>
                </a>
            </li>
            <li>
                <a href="https://loommii.github.io/archives/" title="归档">
                    <span>归档</span>
                </a>
            </li>
            <li>
                <a href="https://loommii.github.io/search/" title="搜索">
                    <span>搜索</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="https://loommii.github.io/">主页</a>&nbsp;»&nbsp;<a href="https://loommii.github.io/posts/">Posts</a></div>
  <h1>
    Golang练习
  </h1>
</header>
<div class="post-content"><blockquote>
<p>Go 中文网、思否、博客园等平台，内容主要以问答形式记录。如果回答中有错误，欢迎大家指出，共同学习、共同进步。</p></blockquote>


</div>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Go每日一题_100
    </h2>
  </header>
  <div class="entry-content">
    <p>下面这段代码输出什么？
package main import &#34;fmt&#34; func f(n int) (r int) { defer func() { r &#43;= n recover() }() var f func() defer f() f = func() { r &#43;= 2 } return n &#43; 1 } func main() { fmt.Println(f(3)) } 🔑 答案解析： 7
// 先执行这一段代码, 然后 r 被赋值为 4 return n&#43;1 // 然后执行，但是会触发panic defer f() // 最后执行，r 再加3 r=7,然后recover(),最后函数返回 7 defer func() { r &#43;= n recover() }() </p>
  </div>
  <footer class="entry-footer"><span title='2024-12-06 20:45:29 +0800 CST'>十二月 6, 2024</span></footer>
  <a class="entry-link" aria-label="post link to Go每日一题_100" href="https://loommii.github.io/posts/go_practise/data/go%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98_100/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Go每日一题_099
    </h2>
  </header>
  <div class="entry-content">
    <p>下面这段代码输出什么？为什么？
func main() { var m = [...]int{1, 2, 3} for i, v := range m { go func() { fmt.Println(i, v) }() } time.Sleep(time.Second * 3) } 🔑 答案解析： go 1.22 前会出现 2 3 2 3 2 3 for range 使用短变量声明 (:=) 的形式迭代变量，需要注意的是，变量 i、v 在每次循环体中都会被重用，而不是重新声明。
各个 goroutine 中输出的 i、v 值都是 for range 循环结束后的 i、v 最终值，而不是各个 goroutine 启动时的 i, v值。可以理解为闭包引用，使用的是上下文环境的值。两种可行的 fix 方法:
</p>
  </div>
  <footer class="entry-footer"><span title='2024-12-06 20:45:28 +0800 CST'>十二月 6, 2024</span></footer>
  <a class="entry-link" aria-label="post link to Go每日一题_099" href="https://loommii.github.io/posts/go_practise/data/go%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98_099/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Go每日一题_098
    </h2>
  </header>
  <div class="entry-content">
    <p>下面这段代码能否正常结束？
func main() { v := []int{1, 2, 3} for i := range v { v = append(v, i) } } 🔑 答案解析： 不会出现死循环，能正常结束。
循环次数在循环开始前就已经确定，循环内改变切片的长度，不影响循环次数
</p>
  </div>
  <footer class="entry-footer"><span title='2024-12-06 20:45:26 +0800 CST'>十二月 6, 2024</span></footer>
  <a class="entry-link" aria-label="post link to Go每日一题_098" href="https://loommii.github.io/posts/go_practise/data/go%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98_098/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Go每日一题_097
    </h2>
  </header>
  <div class="entry-content">
    <p>下面这段代码输出什么？
var p *int func foo() (*int, error) { var i int = 5 return &amp;i, nil } func bar() { //use p fmt.Println(*p) } func main() { p, err := foo() if err != nil { fmt.Println(err) return } bar() fmt.Println(*p) } A. 5 5 B. runtime error
🔑 答案解析： B 全局的 *p 是nil p, err := foo() 这里是一个新的p 局部变量 与全局的p无关 </p>
  </div>
  <footer class="entry-footer"><span title='2024-12-06 20:45:25 +0800 CST'>十二月 6, 2024</span></footer>
  <a class="entry-link" aria-label="post link to Go每日一题_097" href="https://loommii.github.io/posts/go_practise/data/go%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98_097/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Go每日一题_096
    </h2>
  </header>
  <div class="entry-content">
    <p>下面的代码有什么问题？
func main() { fmt.Println([...]int{1} == [2]int{1}) fmt.Println([]int{1} == []int{1}) } 🔑 答案解析： 有两处错误
go 中不同类型是不能比较的，而数组长度是数组类型的一部分，所以 […]int{1} 和 [2]int{1} 是两种不同的类型，不能比较； 切片是不能比较的；
</p>
  </div>
  <footer class="entry-footer"><span title='2024-12-06 20:45:24 +0800 CST'>十二月 6, 2024</span></footer>
  <a class="entry-link" aria-label="post link to Go每日一题_096" href="https://loommii.github.io/posts/go_practise/data/go%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98_096/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Go每日一题_095
    </h2>
  </header>
  <div class="entry-content">
    <p>以下代码的输出结果：
package main import &#34;sync&#34; func main() { var wg sync.WaitGroup foo := make(chan int) bar := make(chan int) wg.Add(1) go func() { defer wg.Done() select { case foo &lt;- &lt;-bar: default: println(&#34;default&#34;) } }() wg.Wait() } A：default B：panic 🔑 答案解析： 按常规理解，go func 中的 select 应该执行 default 分支，程序正常运行。但结果却不是，而是死锁。可以通过该链接测试：https://play.studygolang.com/p/kF4pOjYXbXf。
原因文章也解释了，Go 语言规范中有这么一句：
For all the cases in the statement, the channel operands of receive operations and the channel and right-hand-side expressions of send statements are evaluated exactly once, in source order, upon entering the “select” statement. The result is a set of channels to receive from or send to, and the corresponding values to send. Any side effects in that evaluation will occur irrespective of which (if any) communication operation is selected to proceed. Expressions on the left-hand side of a RecvStmt with a short variable declaration or assignment are not yet evaluated.
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-12-06 20:45:23 +0800 CST'>十二月 6, 2024</span></footer>
  <a class="entry-link" aria-label="post link to Go每日一题_095" href="https://loommii.github.io/posts/go_practise/data/go%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98_095/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Go每日一题_094
    </h2>
  </header>
  <div class="entry-content">
    <p>下面代码输出什么？
type Math struct { x, y int } var m = map[string]Math{ &#34;foo&#34;: Math{2, 3}, } func main() { m[&#34;foo&#34;].x = 4 fmt.Println(m[&#34;foo&#34;].x) } A. 4 B. compilation error
🔑 答案解析： 参考答案及解析：B，编译报错 cannot assign to struct field m[“foo”].x in map。错误原因：对于类似 X = Y的赋值操作，必须知道 X 的地址，才能够将 Y 的值赋给 X，但 go 中的 map 的 value 本身是不可寻址的。
有两个解决办法：
a.使用临时变量
</p>
  </div>
  <footer class="entry-footer"><span title='2024-12-06 20:45:22 +0800 CST'>十二月 6, 2024</span></footer>
  <a class="entry-link" aria-label="post link to Go每日一题_094" href="https://loommii.github.io/posts/go_practise/data/go%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98_094/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Go每日一题_093
    </h2>
  </header>
  <div class="entry-content">
    <p>下面这段代码输出什么？
type Direction int const ( North Direction = iota East South West ) func (d Direction) String() string { return [...]string{&#34;North&#34;, &#34;East&#34;, &#34;South&#34;, &#34;West&#34;}[d] } func main() { fmt.Println(South) } 🔑 答案解析： 参考答案及解析：South。知识点：iota 的用法、类型的 String() 方法。
根据 iota 的用法推断出 South 的值是 2；另外，如果类型定义了 String() 方法，当使用 fmt.Printf()、fmt.Print() 和 fmt.Println() 会自动使用 String() 方法，实现字符串的打印。
</p>
  </div>
  <footer class="entry-footer"><span title='2024-12-06 20:45:21 +0800 CST'>十二月 6, 2024</span></footer>
  <a class="entry-link" aria-label="post link to Go每日一题_093" href="https://loommii.github.io/posts/go_practise/data/go%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98_093/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Go每日一题_092
    </h2>
  </header>
  <div class="entry-content">
    <p>下面这段代码输出什么？为什么？
type People interface { Show() } type Student struct{} func (stu *Student) Show() { } func main() { var s *Student if s == nil { fmt.Println(&#34;s is nil&#34;) } else { fmt.Println(&#34;s is not nil&#34;) } var p People = s if p == nil { fmt.Println(&#34;p is nil&#34;) } else { fmt.Println(&#34;p is not nil&#34;) } } 🔑 答案解析： 参考答案及解析：s is nil 和 p is not nil。
这道题会不会有点诧异，我们分配给变量 p 的值明明是 nil，然而 p 却不是 nil。记住一点，当且仅当动态值和动态类型都为 nil 时，接口类型值才为 nil。上面的代码，给变量 p 赋值之后，p 的动态值是 nil，但是动态类型却是 *Student，是一个 nil 指针，所以相等条件不成立。
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-12-06 20:45:19 +0800 CST'>十二月 6, 2024</span></footer>
  <a class="entry-link" aria-label="post link to Go每日一题_092" href="https://loommii.github.io/posts/go_practise/data/go%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98_092/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Go每日一题_091
    </h2>
  </header>
  <div class="entry-content">
    <p>下面这段代码输出什么？
const ( a = iota b = iota ) const ( name = &#34;name&#34; c = iota d = iota ) func main() { fmt.Println(a) fmt.Println(b) fmt.Println(c) fmt.Println(d) } 🔑 答案解析： 参考答案及解析：0 1 1 2。
知识点：iota 的用法。
iota 是 golang 语言的常量计数器，只能在常量的表达式中使用。
iota 在 const 关键字出现时将被重置为0，const中每新增一行常量声明将使 iota 计数一次。
</p>
  </div>
  <footer class="entry-footer"><span title='2024-12-06 20:45:18 +0800 CST'>十二月 6, 2024</span></footer>
  <a class="entry-link" aria-label="post link to Go每日一题_091" href="https://loommii.github.io/posts/go_practise/data/go%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98_091/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="https://loommii.github.io/go_practise/page/8/">
      «&nbsp;上一页&nbsp;
    </a>
    <a class="next" href="https://loommii.github.io/go_practise/page/10/">下一页&nbsp;&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://loommii.github.io/">loommii</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
