<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>Go Type Inference - Tag - loommii</title>
        <link>https://loommii.github.io/en/tags/go-type-inference/</link>
        <description>Go Type Inference - Tag - loommii</description>
        <generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Sat, 25 Jan 2025 23:19:23 &#43;0800</lastBuildDate><atom:link href="https://loommii.github.io/en/tags/go-type-inference/" rel="self" type="application/rss+xml" /><item>
    <title>Go Daily Question 171</title>
    <link>https://loommii.github.io/en/go_practise/go%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98_171/</link>
    <pubDate>Sat, 25 Jan 2025 23:19:23 &#43;0800</pubDate>
    <author>loommii</author>
    <guid>https://loommii.github.io/en/go_practise/go%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98_171/</guid>
    <description><![CDATA[<p>What is the output of the following code?</p>
<div class="code-block code-line-numbers open" style="counter-reset: code-block 0">
    <div class="code-header language-go">
        <span class="code-title"><i class="arrow fas fa-angle-right fa-fw" aria-hidden="true"></i></span>
        <span class="ellipses"><i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i></span>
        <span class="copy" title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden="true"></i></span>
    </div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">ans</span> <span class="kt">float64</span> <span class="p">=</span> <span class="mi">15</span> <span class="o">+</span> <span class="mi">25</span> <span class="o">+</span> <span class="mf">5.2</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">ans</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div>
<ul>
<li>A: Cannot compile;</li>
<li>B: 45;</li>
<li>C: 45.2;</li>
<li>D: 45.0</li>
</ul>
<button class="toggle-button" onclick="this.nextElementSibling.classList.toggle('show')">ðŸ”‘ Answer Analysis:</button>
<div class="toggle-content">
  <p>C
<a href="https://go.dev/play/p/VCR1yAY32nG" target="_blank" rel="noopener noreffer ">Run online</a></p>
<h2 id="analysis">Analysis</h2>
<h3 id="1-constant-expressions">1. Constant Expressions</h3>
<ul>
<li>A <strong>constant expression</strong> is an expression that contains only constant operands and is evaluated at compile time.</li>
<li>Constants can be:
<ul>
<li><strong>Untyped constants</strong>: e.g., <code>1</code>, <code>2</code>, <code>5.2</code>.</li>
<li><strong>Typed constants</strong>: e.g., <code>const b int8 = 3</code>.</li>
<li><strong>Literal constants</strong>: e.g., <code>1</code>, <code>2</code>, <code>5.2</code>.</li>
<li><strong>Named constants</strong>: e.g., <code>const a = 1 + 2</code>.</li>
</ul>
</li>
</ul>
<h3 id="2-default-types-of-untyped-constants">2. Default Types of Untyped Constants</h3>
<ul>
<li>Although untyped constants do not have an explicit type, they have a default type:
<ul>
<li>Integer literals (e.g., <code>15</code>, <code>25</code>) have a default type of <code>int</code>.</li>
<li>Floating-point literals (e.g., <code>5.2</code>) have a default type of <code>float64</code>.</li>
<li>String literals have a default type of <code>string</code>.</li>
<li>Boolean literals have a default type of <code>bool</code>.</li>
<li>Complex literals have a default type of <code>complex128</code>.</li>
</ul>
</li>
</ul>
<h3 id="3-type-inference">3. Type Inference</h3>
<ul>
<li>Go language supports type inference. If the context does not specify an explicit type, the compiler will treat untyped constants as their default type.</li>
<li>In a constant expression, if the operands include untyped constants of different types, the result&rsquo;s type will be inferred according to the following precedence:
<ul>
<li>Integer &lt; rune &lt; float &lt; complex.</li>
</ul>
</li>
</ul>
<h3 id="4-constant-expression-in-the-problem">4. Constant Expression in the Problem</h3>
<div class="code-block code-line-numbers open" style="counter-reset: code-block 0">
    <div class="code-header language-go">
        <span class="code-title"><i class="arrow fas fa-angle-right fa-fw" aria-hidden="true"></i></span>
        <span class="ellipses"><i class="fas fa-ellipsis-h fa-fw" aria-hidden="true"></i></span>
        <span class="copy" title="Copy to clipboard"><i class="far fa-copy fa-fw" aria-hidden="true"></i></span>
    </div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">ans</span> <span class="kt">float64</span> <span class="p">=</span> <span class="mi">15</span> <span class="o">+</span> <span class="mi">25</span> <span class="o">+</span> <span class="mf">5.2</span></span></span></code></pre></div></div>
<ul>
<li><code>15</code> and <code>25</code> are untyped integer constants, with a default type of <code>int</code>.</li>
<li><code>5.2</code> is an untyped floating-point constant, with a default type of <code>float64</code>.</li>
<li>In the constant expression, since <code>5.2</code> is a floating-point constant, the entire expression&rsquo;s result will be inferred as a floating-point type (<code>float64</code>).</li>
</ul>
<h3 id="operation-process">Operation Process</h3>
<ul>
<li>The result of <code>15 + 25</code> is <code>40</code>, which is still an untyped integer constant.</li>
<li>The result of <code>40 + 5.2</code> is <code>45.2</code>. Since <code>5.2</code> is a floating-point constant, the entire expression&rsquo;s result is inferred as <code>float64</code>.</li>
</ul>
<h3 id="assignment-and-output">Assignment and Output</h3>
<ul>
<li>The final result <code>45.2</code> is assigned to the variable <code>ans</code>, whose type is <code>float64</code>.</li>
<li><code>fmt.Println(ans)</code> outputs <code>45.2</code>.</li>
</ul>
</div>
<style>
  .toggle-content {
    display: none;
    margin-top: 10px;
  }
  .toggle-content.show {
    display: block;
  }
</style>]]></description>
</item>
</channel>
</rss>
