<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Service Design: How to Design a URL Shortening Service - loommii</title><meta name="Description" content="Detailed explanation of how to design a high-performance URL shortening service, including key technical solutions and implementation principles."><meta property="og:url" content="https://loommii.github.io/en/posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/">
  <meta property="og:site_name" content="loommii">
  <meta property="og:title" content="Service Design: How to Design a URL Shortening Service">
  <meta property="og:description" content="Detailed explanation of how to design a high-performance URL shortening service, including key technical solutions and implementation principles.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-12-09T13:57:51+08:00">
    <meta property="article:modified_time" content="2026-01-16T01:28:43+08:00">
    <meta property="article:tag" content="URL Shortening">
    <meta property="article:tag" content="Service Design">
    <meta property="article:tag" content="Distributed Systems">
    <meta property="article:tag" content="System Design">
    <meta property="article:tag" content="Architecture Design">
    <meta property="og:image" content="https://loommii.github.io/images/logo.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://loommii.github.io/images/logo.png">
  <meta name="twitter:title" content="Service Design: How to Design a URL Shortening Service">
  <meta name="twitter:description" content="Detailed explanation of how to design a high-performance URL shortening service, including key technical solutions and implementation principles.">
<meta name="application-name" content="My cool site">
<meta name="apple-mobile-web-app-title" content="My cool site">
<meta name="referrer" content="no-referrer" /><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://loommii.github.io/en/posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/" /><link rel="prev" href="https://loommii.github.io/en/posts/%E6%B5%85%E8%B0%88go-gc-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/" /><link rel="next" href="https://loommii.github.io/en/posts/go_slice%E5%92%8Carray%E7%9A%84%E5%8C%BA%E5%88%AB/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Service Design: How to Design a URL Shortening Service",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/loommii.github.io\/en\/posts\/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1\/"
        },"genre": "posts","keywords": "URL Shortening, Service Design, Distributed Systems, System Design, Architecture Design","wordcount":  1073 ,
        "url": "https:\/\/loommii.github.io\/en\/posts\/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1\/","datePublished": "2024-12-09T13:57:51+08:00","dateModified": "2026-01-16T01:28:43+08:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "loommii"
            },"description": "Detailed explanation of how to design a high-performance URL shortening service, including key technical solutions and implementation principles."
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script>
          const query = window.matchMedia('(prefers-color-scheme: dark)');
          function applyTheme() {
            let theme = window.localStorage?.getItem('theme') || 'auto';
            let isDark = theme === 'dark' || (theme === 'auto' && query.matches);
            document.body.setAttribute('theme', isDark? 'dark' : 'light');
            document.body.setAttribute('cfg-theme', theme);
          }

          applyTheme();
          query.addEventListener('change', applyTheme);
        </script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/en/" title="loommii"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/images/logo.png"
        data-srcset="/images/logo.png, /images/logo.png 1.5x, /images/logo.png 2x"
        data-sizes="auto"
        alt="/images/logo.png"
        title="/images/logo.png" />loommii</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/en/posts/"> 文章 </a><a class="menu-item" href="/en/go_practise/"> Go练习题 </a><a class="menu-item" href="/en/leetcode/"> LeetCode题解 </a><a class="menu-item" href="/en/categories/"> 分类 </a><a class="menu-item" href="/en/tags/"> 标签 </a><a class="menu-item" href="/en/posts/"> 归档 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a><a href="javascript:void(0);" class="menu-item language" title="Select Language">
                    <i class="fa fa-globe fa-fw" aria-hidden="true"></i>                      
                    <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/">简体中文</option><option value="/en/posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/" selected>English</option></select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/en/" title="loommii"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/images/logo.png"
        data-srcset="/images/logo.png, /images/logo.png 1.5x, /images/logo.png 2x"
        data-sizes="auto"
        alt="/images/logo.png"
        title="/images/logo.png" />loommii</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/en/posts/" title="">文章</a><a class="menu-item" href="/en/go_practise/" title="">Go练习题</a><a class="menu-item" href="/en/leetcode/" title="">LeetCode题解</a><a class="menu-item" href="/en/categories/" title="">分类</a><a class="menu-item" href="/en/tags/" title="">标签</a><a class="menu-item" href="/en/posts/" title="">归档</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="Select Language">
                    <i class="fa fa-globe fa-fw" aria-hidden="true"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/">简体中文</option><option value="/en/posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/" selected>English</option></select>
                </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Service Design: How to Design a URL Shortening Service</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/en/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>loommii</a></span>&nbsp;<span class="post-category">included in <a href="/en/categories/system-design/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>System Design</a>&nbsp;<a href="/en/categories/service-architecture/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>Service Architecture</a>&nbsp;<a href="/en/categories/tech-article/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>Tech Article</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2024-12-09">2024-12-09</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;1073 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;6 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#what-is-a-url-shortening-service">What is a URL Shortening Service?</a></li>
        <li><a href="#what-problems-does-a-short-link-service-solve">What Problems Does a Short Link Service Solve?</a></li>
        <li><a href="#the-most-basic-requirements">The Most Basic Requirements</a></li>
        <li><a href="#why-choose-base62-encoding-for-short-link-keys">Why Choose Base62 Encoding for Short Link Keys?</a></li>
        <li><a href="#choosing-the-length-of-the-short-link-key">Choosing the Length of the Short Link Key</a></li>
        <li><a href="#generation-of-short-link-keys">Generation of Short Link Keys</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h3 id="what-is-a-url-shortening-service">What is a URL Shortening Service?</h3>
<p>The essence of a URL shortening service is to redirect a short URL to the original long URL through the HTTP 302 redirection mechanism.</p>
<h3 id="what-problems-does-a-short-link-service-solve">What Problems Does a Short Link Service Solve?</h3>
<ol>
<li>Solving the character limit issue for message sending
For example, Tencent Cloud SMS limits each message to 500 characters. In marketing SMS, URLs often carry numerous parameters (e.g., invitation platform, inviter, activity ID, etc.). These parameters make the URLs very long. Through a URL shortening service, the long URLs in marketing SMS can be replaced with short links, saving character space.
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/image.png"
        data-srcset="/posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/image.png, /posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/image.png 1.5x, /posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/image.png 2x"
        data-sizes="auto"
        alt="/posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/image.png"
        title="Tencent Cloud SMS" width="1124" height="298" /></li>
<li>Hiding request parameters
Taking a marketing campaign as an example, common parameters in URLs might include information like the activity ID. If we don&rsquo;t want these IDs to be modified随意, we can add a corresponding activity ID KEY to the parameters. This way, users can only enter the corresponding activity page when the ID and KEY match. However, after adding the KEY, the original URL becomes even longer. A short link service can help hide these request parameters, keeping the URL concise and secure.</li>
</ol>
<h3 id="the-most-basic-requirements">The Most Basic Requirements</h3>
<ol>
<li>Long URL Registration</li>
<li>Short URL Redirection</li>
</ol>
<h3 id="why-choose-base62-encoding-for-short-link-keys">Why Choose Base62 Encoding for Short Link Keys?</h3>
<p>According to the RFC3986 standard, URLs consist of ASCII characters. The following characters can be safely used in URLs:</p>
<ul>
<li>Letters (a-z and A-Z)</li>
<li>Numbers (0-9)</li>
<li>Some special characters: $-_.+!*&rsquo;(),</li>
</ul>
<p>Although the RFC3986 standard allows some special characters, certain special characters might cause problems with URL parsing, transmission, or storage. For example, characters like &amp;, ?, =, #, etc., have specific meanings in query parameters or paths, so they might cause conflicts or parsing errors.</p>
<blockquote>
<p>To avoid these potential troubles, especially when needing to encode complex query parameters or keys into a URL-friendly format, we usually choose Base62 encoding, which uses only the combination of letters (upper and lower case) and numbers.</p></blockquote>
<h3 id="choosing-the-length-of-the-short-link-key">Choosing the Length of the Short Link Key</h3>
<p>Our character set is already determined to be Base62, so a length of 1 can store 62 types. For each additional digit, the storage limit increases exponentially by powers of 62.</p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Length</th>
          <th style="text-align: left">Storage Limit</th>
          <th style="text-align: left">Interpretation</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">1</td>
          <td style="text-align: left">62</td>
          <td style="text-align: left">1 digit can represent 62 different combinations</td>
      </tr>
      <tr>
          <td style="text-align: left">2</td>
          <td style="text-align: left">62 × 62 = 3,844</td>
          <td style="text-align: left">2 digits can represent 62 squared, i.e., 3,844 different combinations</td>
      </tr>
      <tr>
          <td style="text-align: left">3</td>
          <td style="text-align: left">62 × 62 × 62 = 238,328</td>
          <td style="text-align: left">3 digits can represent 62 cubed, i.e., 238,328 different combinations</td>
      </tr>
      <tr>
          <td style="text-align: left">4</td>
          <td style="text-align: left">62 × 62 × 62 × 62 = 14,776,336</td>
          <td style="text-align: left">4 digits can represent 62 to the fourth power, i.e., 14,776,336 different combinations</td>
      </tr>
      <tr>
          <td style="text-align: left">5</td>
          <td style="text-align: left">62 × 62 × 62 × 62 × 62 = 916,132,832</td>
          <td style="text-align: left">5 digits can represent 62 to the fifth power, i.e., 916,132,832 different combinations</td>
      </tr>
      <tr>
          <td style="text-align: left">6</td>
          <td style="text-align: left">62 × 62 × 62 × 62 × 62 × 62 = 56,800,235,584</td>
          <td style="text-align: left">6 digits can represent 62 to the sixth power, i.e., 56,800,235,584 different combinations</td>
      </tr>
  </tbody>
</table>
<blockquote>
<p>The storage limit for 5 digits has already reached 916,132,832. This number is already very large and sufficient to support most application scenarios. However, if you hope to further reduce conflicts when generating characters or plan for the long term, choosing 6 digits as the short link KEY length would be a good choice.</p></blockquote>
<h3 id="generation-of-short-link-keys">Generation of Short Link Keys</h3>
<p>There is no best solution, only the most suitable one.</p>
<h4 id="solution-1-randomly-generate-short-link-keys">Solution 1: Randomly Generate Short Link Keys</h4>
<p>Implementation: The system generates the corresponding short link key through a random function.
Advantages:</p>
<ul>
<li>Easy to implement: The implementation of randomly generating short link keys is relatively simple. It can quickly obtain short link identifiers by generating random numbers and mapping them to the Base62 character set. Most programming languages provide simple random number generation functions, making it convenient to operate.</li>
</ul>
<p>Disadvantages:</p>
<ul>
<li>The probability of conflicts increases as the amount of existing data grows.</li>
<li>The same long URL will generate different short link keys, which may lead to waste.</li>
</ul>
<p>Solution: Use hash calculation.</p>
<h4 id="solution-2-hash-algorithm">Solution 2: Hash Algorithm</h4>
<p>Implementation: Generate a fixed-length short link key from the long URL using a hash algorithm.</p>
<p>Advantages:</p>
<ul>
<li>Solves the problem of the same long URL generating different short links: The hash algorithm ensures that the same long URL always generates the same short link key, thus avoiding storage redundancy.</li>
</ul>
<p>Disadvantages:</p>
<ul>
<li>Possibility of hash collisions: Although hash functions can generate fixed-length short links, different long URLs might produce the same hash value, leading to hash collisions.
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/image-1.png"
        data-srcset="/posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/image-1.png, /posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/image-1.png 1.5x, /posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/image-1.png 2x"
        data-sizes="auto"
        alt="/posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/image-1.png"
        title="Hash Collision" width="1330" height="566" />
Solution: When encountering hash collisions, meaningless strings can be inserted after the hash value, or other deduplication strategies can be adopted, such as performing a secondary hash calculation.</li>
</ul>
<h4 id="solution-3-counter-increment-method--dictionary">Solution 3: Counter Increment Method + Dictionary</h4>
<p>Implementation: Maintain a counter. Each time a new long URL is added, the counter increments, and then the counter value is converted into a fixed short link key.</p>
<blockquote>
<p>Example: Value 66, short link key is dictionary[0]+dictionary[0]+dictionary[0]+dictionary[0]+dictionary[1]+dictionary[4]</p></blockquote>
<p>Advantages:</p>
<ul>
<li>No possibility of conflicts in a single-machine environment: Since the counter is incremented, each short link key is unique, so no conflicts will occur.</li>
</ul>
<p>Disadvantages:</p>
<ul>
<li>The generated short link keys exhibit obvious patterns: Because the short link keys are generated based on the counter, the keys have an obvious incremental pattern, making them easy to guess or predict.</li>
<li>In a distributed environment, conflicts are possible: In a distributed environment, if multiple nodes use the same counter, it may lead to short link key conflicts.</li>
<li>The same long URL will generate different short link keys, possibly leading to waste: Each time a short link is generated, the same long URL will get a different short link key.</li>
</ul>
<p>Solution: The generation logic can be optimized through methods like counter inversion, shuffled dictionaries, or hash calculations to reduce patterns and conflicts.</p>
<h4 id="solution-4-counter-increment-method--shuffled-dictionary--counter-inversion--hash-calculation">Solution 4: Counter Increment Method + Shuffled Dictionary + Counter Inversion + Hash Calculation</h4>
<p>Implementation:</p>
<ul>
<li>Shuffled Dictionary: At service startup, shuffle the order of the dictionary to ensure that the same counter value generates different short link keys, thereby avoiding conflicts in a distributed environment.</li>
<li>Counter Inversion: To break the regularity in short link generation, perform an inversion operation on the generated number based on the counter increment. This increases the magnitude of each number change, making the generated short link keys more diverse.</li>
</ul>
<blockquote>
<p>For example, 123 -&gt; 00 0000 0123 -&gt; 32 1000 0000</p></blockquote>
<p>Advantages:</p>
<ul>
<li>Almost solves all problems: This solution, through multiple optimizations, almost solves all potential problems, such as conflicts, regularity, and waste.</li>
</ul>
<p>Disadvantages:</p>
<ul>
<li>Service implementation is relatively complex: This solution requires additional logic to handle dictionary shuffling, counter inversion, etc., making the service implementation more complex.</li>
<li>Higher performance requirements</li>
</ul></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2026-01-16</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on X" data-sharer="x" data-url="https://loommii.github.io/en/posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/" data-title="Service Design: How to Design a URL Shortening Service" data-hashtags="URL Shortening,Service Design,Distributed Systems,System Design,Architecture Design"><i class="fab fa-x-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Threads" data-sharer="threads" data-url="https://loommii.github.io/en/posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/" data-title="Service Design: How to Design a URL Shortening Service"><i class="fab fa-threads fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://loommii.github.io/en/posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/" data-hashtag="URL Shortening"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="https://loommii.github.io/en/posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/" data-title="Service Design: How to Design a URL Shortening Service"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="https://loommii.github.io/en/posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/" data-title="Service Design: How to Design a URL Shortening Service"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@15.14.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="https://loommii.github.io/en/posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/" data-title="Service Design: How to Design a URL Shortening Service"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Diaspora" data-sharer="diaspora" data-url="https://loommii.github.io/en/posts/%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1_%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AAurl%E7%9F%AD%E9%93%BE%E6%9C%8D%E5%8A%A1/" data-title="Service Design: How to Design a URL Shortening Service" data-description="Detailed explanation of how to design a high-performance URL shortening service, including key technical solutions and implementation principles."><i class="fab fa-diaspora fa-fw" aria-hidden="true"></i></a><a href="https://t.me/share/url?url=https%3a%2f%2floommii.github.io%2fen%2fposts%2f%25E6%259C%258D%25E5%258A%25A1%25E8%25AE%25BE%25E8%25AE%25A1_%25E5%25A6%2582%25E4%25BD%2595%25E8%25AE%25BE%25E8%25AE%25A1%25E4%25B8%2580%25E4%25B8%25AAurl%25E7%259F%25AD%25E9%2593%25BE%25E6%259C%258D%25E5%258A%25A1%2f&amp;text=Service%20Design%3a%20How%20to%20Design%20a%20URL%20Shortening%20Service" target="_blank" title="Share on Telegram"><i class="fab fa-telegram fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/en/tags/url-shortening/">URL Shortening</a>,&nbsp;<a href="/en/tags/service-design/">Service Design</a>,&nbsp;<a href="/en/tags/distributed-systems/">Distributed Systems</a>,&nbsp;<a href="/en/tags/system-design/">System Design</a>,&nbsp;<a href="/en/tags/architecture-design/">Architecture Design</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/en/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/en/posts/%E6%B5%85%E8%B0%88go-gc-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/" class="prev" rel="prev" title="An Overview of Go GC (Garbage Collection)"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>An Overview of Go GC (Garbage Collection)</a>
            <a href="/en/posts/go_slice%E5%92%8Carray%E7%9A%84%E5%8C%BA%E5%88%AB/" class="next" rel="next" title="Go: Slices vs. Arrays">Go: Slices vs. Arrays<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.145.0">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.3.1-DEV"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2019 - 2026</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/en/" target="_blank">loommii</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a>
        </div>

        <div id="fixed-buttons-hidden"><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css"><script src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script src="/lib/lunr/lunr.stemmer.support.min.js"></script><script src="/lib/lunr/lunr.zh.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.2/sharer.min.js"></script><script>window.config={"comment":{},"lightgallery":true,"search":{"highlightTag":"em","lunrLanguageCode":"en","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30}};</script><script src="/js/theme.min.js"></script></body>
</html>
